name: API CI

on:
  push:
    paths:
      - 'services/main/**'
    branches:
      - main
      - prod
  pull_request:
    paths:
      - 'services/main/**'

jobs:
    code-checks:
        name: Lint
        runs-on: ubuntu-latest
        defaults:
          run:
            working-directory: services/main
        steps:
            - name: â¬‡ï¸ Checkout repo
              uses: actions/checkout@v4
            - name: â” Setup go
              uses: actions/setup-go@v5
              with:
                go-version-file: services/main/go.mod
                cache: true
            - name: ğŸ“¥ Download deps
              run: go mod download && make install-tools
            - name: ğŸ”¬ Lint
              run: make lint